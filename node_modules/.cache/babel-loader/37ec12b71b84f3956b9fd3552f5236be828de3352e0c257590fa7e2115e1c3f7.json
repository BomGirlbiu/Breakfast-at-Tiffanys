{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport * as echarts from 'echarts';\nimport axios from 'axios';\nexport default {\n  name: 'FinancialPage',\n  data() {\n    return {\n      // 概览数据\n      monthlyIncome: 0,\n      monthlyExpense: 0,\n      monthlyProfit: 0,\n      incomeTrend: 0,\n      expenseTrend: 0,\n      profitTrend: 0,\n      // 日期范围\n      startDate: this.getDefaultStartDate(),\n      endDate: this.getDefaultEndDate(),\n      selectedType: 'all',\n      // 图表实例\n      trendChart: null,\n      incomePieChart: null,\n      expensePieChart: null,\n      // 交易数据\n      transactions: [],\n      // 支出管理相关数据\n      expenses: [],\n      expenseCategories: [],\n      selectedCategory: '',\n      currentExpense: {\n        id: null,\n        expenseDate: '',\n        category: '',\n        amount: 0,\n        note: '',\n        createdBy: 'admin'\n      },\n      showExpenseDialog: false,\n      showDeleteDialog: false,\n      expenseToDelete: null,\n      // 加载状态\n      loading: {\n        summary: false,\n        trends: false,\n        incomePie: false,\n        expensePie: false,\n        transactions: false,\n        expenses: false\n      },\n      // API基础URL\n      apiBaseUrl: 'http://localhost:5050/api',\n      // 功能区域选择\n      activeTab: 'analysis'\n    };\n  },\n  computed: {\n    filteredTransactions() {\n      return this.transactions.filter(item => {\n        // 将字符串日期转换为Date对象进行比较\n        const itemDate = new Date(item.date.split('T')[0]);\n        const startDateObj = new Date(this.startDate);\n        const endDateObj = new Date(this.endDate);\n\n        // 添加调试日志\n        console.log('过滤交易记录:', item.id, itemDate, startDateObj <= itemDate, itemDate <= endDateObj);\n        const dateInRange = startDateObj <= itemDate && itemDate <= endDateObj;\n        const typeMatch = this.selectedType === 'all' || item.type === this.selectedType;\n        return dateInRange && typeMatch;\n      });\n    },\n    filteredExpenses() {\n      return this.expenses.filter(expense => {\n        // 日期过滤\n        const expenseDate = new Date(expense.expenseDate.split('T')[0]);\n        const startDateObj = new Date(this.startDate);\n        const endDateObj = new Date(this.endDate);\n        const dateInRange = startDateObj <= expenseDate && expenseDate <= endDateObj;\n\n        // 类别过滤\n        const categoryMatch = !this.selectedCategory || expense.category === this.selectedCategory;\n        return dateInRange && categoryMatch;\n      });\n    }\n  },\n  watch: {\n    startDate() {\n      this.fetchTransactions();\n      this.fetchExpenseComposition();\n      this.fetchIncomeComposition();\n      this.fetchTrends();\n    },\n    endDate() {\n      this.fetchTransactions();\n      this.fetchExpenseComposition();\n      this.fetchIncomeComposition();\n      this.fetchTrends();\n    },\n    selectedCategory() {\n      // 当选择的类别变化时更新过滤结果\n      console.log('支出类别筛选变更为:', this.selectedCategory);\n      this.fetchExpenses();\n    }\n  },\n  mounted() {\n    this.initCharts();\n    this.fetchData();\n    this.fetchExpenseCategories();\n  },\n  methods: {\n    // 获取默认开始日期（当年1月1日）\n    getDefaultStartDate() {\n      return '2024-01-01';\n    },\n    // 获取默认结束日期（2024年12月31日）\n    getDefaultEndDate() {\n      return '2024-12-31';\n    },\n    // 格式化日期时间\n    formatDateTime(date) {\n      return date + 'T00:00:00';\n    },\n    // 获取所有数据\n    fetchData() {\n      console.log('开始获取财务数据...');\n      this.fetchMonthlySummary();\n      this.fetchTrends();\n      this.fetchIncomeComposition();\n      this.fetchExpenseComposition();\n      this.fetchTransactions();\n      this.fetchExpenses();\n    },\n    // 获取月度概览数据\n    async fetchMonthlySummary() {\n      this.loading.summary = true;\n      try {\n        console.log('正在计算选定期间财务数据...');\n        const startDateTime = this.formatDateTime(this.startDate);\n        const endDateTime = this.formatDateTime(this.endDate);\n\n        // 获取收入数据\n        const incomeResponse = await axios.get(`${this.apiBaseUrl}/finance/transactions`, {\n          params: {\n            startDate: startDateTime,\n            endDate: endDateTime\n          }\n        });\n\n        // 获取支出数据\n        const expenseResponse = await axios.get(`${this.apiBaseUrl}/expenses`, {\n          params: {\n            startDate: startDateTime,\n            endDate: endDateTime\n          }\n        });\n\n        // 计算收入总额\n        const incomeTransactions = incomeResponse.data.filter(transaction => transaction.type === 'income');\n        const totalIncome = incomeTransactions.reduce((sum, transaction) => sum + transaction.amount, 0);\n\n        // 计算支出总额\n        const totalExpense = expenseResponse.data.reduce((sum, expense) => sum + expense.amount, 0);\n\n        // 计算利润\n        const totalProfit = totalIncome - totalExpense;\n\n        // 获取上个月同期数据进行同比计算\n        const prevStartDate = this.getPreviousPeriod(this.startDate);\n        const prevEndDate = this.getPreviousPeriod(this.endDate);\n        const prevStartDateTime = this.formatDateTime(prevStartDate);\n        const prevEndDateTime = this.formatDateTime(prevEndDate);\n\n        // 获取上期收入数据\n        const prevIncomeResponse = await axios.get(`${this.apiBaseUrl}/finance/transactions`, {\n          params: {\n            startDate: prevStartDateTime,\n            endDate: prevEndDateTime\n          }\n        });\n\n        // 获取上期支出数据\n        const prevExpenseResponse = await axios.get(`${this.apiBaseUrl}/expenses`, {\n          params: {\n            startDate: prevStartDateTime,\n            endDate: prevEndDateTime\n          }\n        });\n\n        // 计算上期收入总额\n        const prevIncomeTransactions = prevIncomeResponse.data.filter(transaction => transaction.type === 'income');\n        const prevTotalIncome = prevIncomeTransactions.reduce((sum, transaction) => sum + transaction.amount, 0);\n\n        // 计算上期支出总额\n        const prevTotalExpense = prevExpenseResponse.data.reduce((sum, expense) => sum + expense.amount, 0);\n\n        // 计算上期利润\n        const prevTotalProfit = prevTotalIncome - prevTotalExpense;\n\n        // 计算同比变化率\n        const incomeTrendValue = prevTotalIncome > 0 ? (totalIncome - prevTotalIncome) / prevTotalIncome * 100 : 0;\n        const expenseTrendValue = prevTotalExpense > 0 ? (totalExpense - prevTotalExpense) / prevTotalExpense * 100 : 0;\n        const profitTrendValue = prevTotalProfit > 0 ? (totalProfit - prevTotalProfit) / prevTotalProfit * 100 : 0;\n        console.log('计算的财务数据:', {\n          当前收入: totalIncome,\n          当前支出: totalExpense,\n          当前利润: totalProfit,\n          上期收入: prevTotalIncome,\n          上期支出: prevTotalExpense,\n          上期利润: prevTotalProfit,\n          收入趋势: incomeTrendValue,\n          支出趋势: expenseTrendValue,\n          利润趋势: profitTrendValue\n        });\n\n        // 更新数据\n        this.monthlyIncome = totalIncome;\n        this.monthlyExpense = totalExpense;\n        this.monthlyProfit = totalProfit;\n        this.incomeTrend = incomeTrendValue.toFixed(1);\n        this.expenseTrend = expenseTrendValue.toFixed(1);\n        this.profitTrend = profitTrendValue.toFixed(1);\n      } catch (error) {\n        console.error('计算财务数据失败:', error);\n        if (error.response) {\n          console.error('错误状态码:', error.response.status);\n          console.error('错误响应:', error.response.data);\n        }\n        // 重置数据\n        this.monthlyIncome = 0;\n        this.monthlyExpense = 0;\n        this.monthlyProfit = 0;\n        this.incomeTrend = 0;\n        this.expenseTrend = 0;\n        this.profitTrend = 0;\n      } finally {\n        this.loading.summary = false;\n      }\n    },\n    // 获取上一个时间段的日期\n    getPreviousPeriod(dateStr) {\n      const date = new Date(dateStr);\n      date.setMonth(date.getMonth() - 1);\n      return date.toISOString().split('T')[0];\n    },\n    // 处理日期变化\n    handleDateChange() {\n      console.log('日期范围变更为:', this.startDate, '至', this.endDate);\n      this.fetchMonthlySummary();\n      this.fetchTrends();\n      this.fetchIncomeComposition();\n      this.fetchExpenseComposition();\n      this.fetchTransactions();\n      this.fetchExpenses();\n    },\n    // 获取趋势数据\n    async fetchTrends() {\n      this.loading.trends = true;\n      try {\n        console.log('正在生成趋势数据...');\n        const startDateTime = this.formatDateTime(this.startDate);\n        const endDateTime = this.formatDateTime(this.endDate);\n\n        // 获取交易数据\n        const transactionsResponse = await axios.get(`${this.apiBaseUrl}/finance/transactions`, {\n          params: {\n            startDate: startDateTime,\n            endDate: endDateTime\n          }\n        });\n        const incomeTransactions = transactionsResponse.data.filter(transaction => transaction.type === 'income');\n\n        // 获取支出数据\n        const expensesResponse = await axios.get(`${this.apiBaseUrl}/expenses`, {\n          params: {\n            startDate: startDateTime,\n            endDate: endDateTime\n          }\n        });\n        const expenses = expensesResponse.data;\n\n        // 准备月份标签和数据\n        const months = this.getMonthsInRange(this.startDate, this.endDate);\n        const labels = months.map(date => `${date.getFullYear()}年${date.getMonth() + 1}月`);\n\n        // 按月份统计收入\n        const incomeData = new Array(months.length).fill(0);\n        incomeTransactions.forEach(transaction => {\n          const transactionDate = new Date(transaction.date);\n          const monthIndex = this.findMonthIndex(months, transactionDate);\n          if (monthIndex !== -1) {\n            incomeData[monthIndex] += transaction.amount;\n          }\n        });\n\n        // 按月份统计支出\n        const expenseData = new Array(months.length).fill(0);\n        expenses.forEach(expense => {\n          const expenseDate = new Date(expense.expenseDate);\n          const monthIndex = this.findMonthIndex(months, expenseDate);\n          if (monthIndex !== -1) {\n            expenseData[monthIndex] += expense.amount;\n          }\n        });\n\n        // 计算利润\n        const profitData = months.map((_, index) => {\n          return +(incomeData[index] - expenseData[index]).toFixed(2);\n        });\n\n        // 确保数据为两位小数\n        const formattedIncomeData = incomeData.map(value => +value.toFixed(2));\n        const formattedExpenseData = expenseData.map(value => +value.toFixed(2));\n        console.log('生成的趋势数据:', {\n          labels,\n          income: formattedIncomeData,\n          expense: formattedExpenseData,\n          profit: profitData\n        });\n\n        // 更新趋势图\n        this.updateTrendChart(labels, formattedIncomeData, formattedExpenseData, profitData);\n      } catch (error) {\n        console.error('生成趋势数据失败:', error);\n        if (error.response) {\n          console.error('错误状态码:', error.response.status);\n          console.error('错误响应:', error.response.data);\n        }\n      } finally {\n        this.loading.trends = false;\n      }\n    },\n    // 获取日期范围内的所有月份\n    getMonthsInRange(startDateStr, endDateStr) {\n      const startDate = new Date(startDateStr);\n      const endDate = new Date(endDateStr);\n\n      // 确保日期是月份的第一天，方便比较\n      const start = new Date(startDate.getFullYear(), startDate.getMonth(), 1);\n      const end = new Date(endDate.getFullYear(), endDate.getMonth(), 1);\n      const months = [];\n      const current = new Date(start);\n      while (current <= end) {\n        months.push(new Date(current));\n        current.setMonth(current.getMonth() + 1);\n      }\n      return months;\n    },\n    // 查找日期对应的月份索引\n    findMonthIndex(months, date) {\n      const targetYear = date.getFullYear();\n      const targetMonth = date.getMonth();\n      return months.findIndex(month => month.getFullYear() === targetYear && month.getMonth() === targetMonth);\n    },\n    // 获取收入构成数据\n    async fetchIncomeComposition() {\n      this.loading.incomePie = true;\n      try {\n        console.log('正在获取收入构成数据...');\n        const startDateTime = this.formatDateTime(this.startDate);\n        const endDateTime = this.formatDateTime(this.endDate);\n\n        // 从/api/finance/transactions接口获取原始交易数据\n        const response = await axios.get(`${this.apiBaseUrl}/finance/transactions`, {\n          params: {\n            startDate: startDateTime,\n            endDate: endDateTime\n          }\n        });\n        const transactionsData = response.data;\n        console.log('原始交易数据:', transactionsData);\n\n        // 筛选出收入类型的交易记录\n        const incomeTransactions = transactionsData.filter(transaction => transaction.type === 'income');\n\n        // 按类别分组统计收入金额\n        const incomeByCategory = {};\n        let totalIncome = 0;\n        for (const transaction of incomeTransactions) {\n          const category = transaction.category;\n          if (!incomeByCategory[category]) {\n            incomeByCategory[category] = 0;\n          }\n          incomeByCategory[category] += transaction.amount;\n          totalIncome += transaction.amount;\n        }\n\n        // 转换为饼图所需格式，并计算百分比\n        const chartData = [];\n        for (const [category, amount] of Object.entries(incomeByCategory)) {\n          const percentage = amount / totalIncome * 100 || 0;\n          chartData.push({\n            name: category,\n            value: amount.toFixed(2),\n            percentage: percentage.toFixed(1)\n          });\n        }\n\n        // 按金额降序排序\n        chartData.sort((a, b) => b.value - a.value);\n\n        // 如果没有收入数据，添加一条空数据\n        if (chartData.length === 0) {\n          chartData.push({\n            name: '暂无收入',\n            value: 0,\n            percentage: 0\n          });\n        }\n        console.log('处理后的收入构成数据:', chartData);\n\n        // 更新收入饼图\n        this.updateIncomePieChart(chartData);\n      } catch (error) {\n        console.error('获取收入构成数据失败:', error);\n        if (error.response) {\n          console.error('错误状态码:', error.response.status);\n          console.error('错误响应:', error.response.data);\n        }\n      } finally {\n        this.loading.incomePie = false;\n      }\n    },\n    // 获取支出构成数据\n    async fetchExpenseComposition() {\n      this.loading.expensePie = true;\n      try {\n        console.log('正在获取支出构成数据...');\n        const startDateTime = this.formatDateTime(this.startDate);\n        const endDateTime = this.formatDateTime(this.endDate);\n\n        // 从/api/expenses接口获取原始支出数据\n        const response = await axios.get(`${this.apiBaseUrl}/expenses`, {\n          params: {\n            startDate: startDateTime,\n            endDate: endDateTime\n          }\n        });\n        const expensesData = response.data;\n        console.log('原始支出数据:', expensesData);\n\n        // 按类别分组统计支出金额\n        const expenseByCategory = {};\n        let totalExpense = 0;\n        for (const expense of expensesData) {\n          const category = expense.category;\n          if (!expenseByCategory[category]) {\n            expenseByCategory[category] = 0;\n          }\n          expenseByCategory[category] += expense.amount;\n          totalExpense += expense.amount;\n        }\n\n        // 转换为饼图所需格式，并计算百分比\n        const chartData = [];\n        for (const [category, amount] of Object.entries(expenseByCategory)) {\n          const percentage = amount / totalExpense * 100 || 0;\n          chartData.push({\n            name: category,\n            value: amount.toFixed(2),\n            percentage: percentage.toFixed(1)\n          });\n        }\n\n        // 按金额降序排序\n        chartData.sort((a, b) => b.value - a.value);\n\n        // 如果没有支出数据，添加一条空数据\n        if (chartData.length === 0) {\n          chartData.push({\n            name: '暂无支出',\n            value: 0,\n            percentage: 0\n          });\n        }\n        console.log('处理后的支出构成数据:', chartData);\n\n        // 更新支出饼图\n        this.updateExpensePieChart(chartData);\n      } catch (error) {\n        console.error('获取支出构成数据失败:', error);\n        if (error.response) {\n          console.error('错误状态码:', error.response.status);\n          console.error('错误响应:', error.response.data);\n        }\n      } finally {\n        this.loading.expensePie = false;\n      }\n    },\n    // 获取交易明细数据\n    async fetchTransactions() {\n      this.loading.transactions = true;\n      try {\n        console.log('正在获取交易明细数据...');\n        console.log('日期范围:', this.startDate, '至', this.endDate);\n        const startDateTime = this.formatDateTime(this.startDate);\n        const endDateTime = this.formatDateTime(this.endDate);\n\n        // 获取支出数据\n        console.log('正在请求支出数据...');\n        const expenseResponse = await axios.get(`${this.apiBaseUrl}/expenses`, {\n          params: {\n            startDate: startDateTime,\n            endDate: endDateTime\n          }\n        });\n        console.log('支出数据响应:', expenseResponse.data);\n\n        // 获取收入数据\n        console.log('正在请求收入数据...');\n        const incomeResponse = await axios.get(`${this.apiBaseUrl}/finance/transactions`, {\n          params: {\n            startDate: startDateTime,\n            endDate: endDateTime\n          }\n        });\n        console.log('收入数据响应:', incomeResponse.data);\n\n        // 处理支出数据\n        const expenses = expenseResponse.data.map(expense => ({\n          id: expense.id,\n          date: expense.expenseDate,\n          type: 'expense',\n          category: expense.category,\n          amount: expense.amount,\n          note: expense.note\n        }));\n\n        // 处理收入数据\n        const incomes = incomeResponse.data.map(income => ({\n          id: income.id,\n          date: income.date,\n          type: 'income',\n          category: income.category,\n          amount: income.amount,\n          note: income.note\n        }));\n\n        // 合并并排序\n        this.transactions = [...expenses, ...incomes].sort((a, b) => {\n          return new Date(b.date) - new Date(a.date);\n        });\n        console.log('合并后的交易数据:', this.transactions);\n      } catch (error) {\n        console.error('获取交易明细数据失败:', error);\n        if (error.response) {\n          console.error('错误状态码:', error.response.status);\n          console.error('错误响应:', error.response.data);\n        }\n        this.transactions = [];\n      } finally {\n        this.loading.transactions = false;\n      }\n    },\n    // 获取支出数据\n    async fetchExpenses() {\n      this.loading.expenses = true;\n      try {\n        console.log('正在获取支出数据...');\n        const startDateTime = this.formatDateTime(this.startDate);\n        const endDateTime = this.formatDateTime(this.endDate);\n        const response = await axios.get(`${this.apiBaseUrl}/expenses`, {\n          params: {\n            startDate: startDateTime,\n            endDate: endDateTime,\n            category: this.selectedCategory || undefined\n          }\n        });\n        this.expenses = response.data;\n        console.log('支出数据:', this.expenses);\n      } catch (error) {\n        console.error('获取支出数据失败:', error);\n        if (error.response) {\n          console.error('错误状态码:', error.response.status);\n          console.error('错误响应:', error.response.data);\n        }\n        this.expenses = [];\n      } finally {\n        this.loading.expenses = false;\n      }\n    },\n    // 获取支出类别\n    async fetchExpenseCategories() {\n      try {\n        console.log('正在获取支出类别...');\n        const response = await axios.get(`${this.apiBaseUrl}/expenses/categories`);\n        this.expenseCategories = response.data;\n        console.log('支出类别:', this.expenseCategories);\n      } catch (error) {\n        console.error('获取支出类别失败:', error);\n        // 设置默认类别\n        this.expenseCategories = ['原料采购', '人工成本', '水电费用', '设备维护', '店铺租金', '其他支出'];\n      }\n    },\n    // 初始化图表\n    initCharts() {\n      // 初始化趋势图\n      this.trendChart = echarts.init(this.$refs.trendChart);\n\n      // 初始化收入构成饼图\n      this.incomePieChart = echarts.init(this.$refs.incomePieChart);\n\n      // 初始化支出构成饼图\n      this.expensePieChart = echarts.init(this.$refs.expensePieChart);\n\n      // 监听窗口大小变化，调整图表大小\n      window.addEventListener('resize', this.handleResize);\n    },\n    // 更新趋势图\n    updateTrendChart(labels, incomeData, expenseData, profitData) {\n      // 计算合适的Y轴最大值\n      const allValues = [...incomeData, ...expenseData, ...profitData];\n      const maxValue = Math.max(...allValues);\n      const yAxisMax = Math.ceil(maxValue * 1.1 / 1000) * 1000; // 向上取整到最近的1000\n\n      this.trendChart.setOption({\n        title: {\n          text: '收支趋势',\n          left: 'center',\n          textStyle: {\n            fontSize: 16,\n            fontWeight: 'normal'\n          }\n        },\n        tooltip: {\n          trigger: 'axis',\n          formatter: function (params) {\n            let result = params[0].name + '<br/>';\n            params.forEach(param => {\n              const color = param.color;\n              const marker = `<span style=\"display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;background-color:${color};\"></span>`;\n              result += marker + param.seriesName + ': ¥' + param.value.toLocaleString('zh-CN', {\n                minimumFractionDigits: 2,\n                maximumFractionDigits: 2\n              }) + '<br/>';\n            });\n            return result;\n          }\n        },\n        legend: {\n          data: ['收入', '支出', '利润'],\n          top: 'bottom'\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '15%',\n          top: '10%',\n          containLabel: true\n        },\n        xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          data: labels,\n          axisLabel: {\n            rotate: labels.length > 6 ? 45 : 0\n          }\n        },\n        yAxis: {\n          type: 'value',\n          max: yAxisMax,\n          axisLabel: {\n            formatter: value => '¥' + value.toLocaleString('zh-CN')\n          }\n        },\n        series: [{\n          name: '收入',\n          type: 'line',\n          data: incomeData,\n          itemStyle: {\n            color: '#4CAF50'\n          },\n          lineStyle: {\n            width: 3\n          },\n          areaStyle: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n              offset: 0,\n              color: 'rgba(76, 175, 80, 0.4)'\n            }, {\n              offset: 1,\n              color: 'rgba(76, 175, 80, 0.1)'\n            }])\n          },\n          smooth: true,\n          symbol: 'circle',\n          symbolSize: 8\n        }, {\n          name: '支出',\n          type: 'line',\n          data: expenseData,\n          itemStyle: {\n            color: '#F44336'\n          },\n          lineStyle: {\n            width: 3\n          },\n          areaStyle: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n              offset: 0,\n              color: 'rgba(244, 67, 54, 0.4)'\n            }, {\n              offset: 1,\n              color: 'rgba(244, 67, 54, 0.1)'\n            }])\n          },\n          smooth: true,\n          symbol: 'circle',\n          symbolSize: 8\n        }, {\n          name: '利润',\n          type: 'line',\n          data: profitData,\n          itemStyle: {\n            color: '#2196F3'\n          },\n          lineStyle: {\n            width: 3\n          },\n          areaStyle: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n              offset: 0,\n              color: 'rgba(33, 150, 243, 0.4)'\n            }, {\n              offset: 1,\n              color: 'rgba(33, 150, 243, 0.1)'\n            }])\n          },\n          smooth: true,\n          symbol: 'circle',\n          symbolSize: 8\n        }]\n      });\n    },\n    // 更新收入构成饼图\n    updateIncomePieChart(data) {\n      const chartData = data.map(item => ({\n        name: item.name,\n        value: parseFloat(item.value)\n      }));\n      this.incomePieChart.setOption({\n        title: {\n          text: '收入构成'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{a} <br/>{b}: {c} ({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          left: 'left',\n          type: 'scroll'\n        },\n        series: [{\n          name: '收入来源',\n          type: 'pie',\n          radius: '50%',\n          data: chartData,\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n          },\n          label: {\n            show: true,\n            formatter: '{b}: {d}%'\n          }\n        }]\n      });\n    },\n    // 更新支出构成饼图\n    updateExpensePieChart(data) {\n      const chartData = data.map(item => ({\n        name: item.name,\n        value: parseFloat(item.value)\n      }));\n      this.expensePieChart.setOption({\n        title: {\n          text: '支出构成'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{a} <br/>{b}: {c} ({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          left: 'left',\n          type: 'scroll'\n        },\n        series: [{\n          name: '支出类别',\n          type: 'pie',\n          radius: '50%',\n          data: chartData,\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n          },\n          label: {\n            show: true,\n            formatter: '{b}: {d}%'\n          }\n        }]\n      });\n    },\n    handleResize() {\n      this.trendChart?.resize();\n      this.incomePieChart?.resize();\n      this.expensePieChart?.resize();\n    },\n    formatNumber(num) {\n      return num.toLocaleString('zh-CN', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      });\n    },\n    formatDate(dateStr) {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString('zh-CN');\n    },\n    // 打开支出编辑对话框\n    openExpenseDialog(expense) {\n      if (expense) {\n        // 编辑现有支出\n        this.currentExpense = {\n          id: expense.id,\n          expenseDate: expense.expenseDate.split('T')[0],\n          category: expense.category,\n          amount: expense.amount,\n          note: expense.note || '',\n          createdBy: expense.createdBy\n        };\n      } else {\n        // 添加新支出\n        const today = new Date().toISOString().split('T')[0];\n        this.currentExpense = {\n          id: null,\n          expenseDate: today,\n          category: this.expenseCategories.length > 0 ? this.expenseCategories[0] : '',\n          amount: 0,\n          note: '',\n          createdBy: 'admin'\n        };\n      }\n      this.showExpenseDialog = true;\n    },\n    // 保存支出\n    async saveExpense() {\n      try {\n        console.log('保存支出:', this.currentExpense);\n        const expenseData = {\n          ...this.currentExpense,\n          expenseDate: this.formatDateTime(this.currentExpense.expenseDate),\n          amount: parseFloat(this.currentExpense.amount)\n        };\n        let response;\n        if (this.currentExpense.id) {\n          // 更新已有支出\n          response = await axios.put(`${this.apiBaseUrl}/expenses/${this.currentExpense.id}`, expenseData);\n          console.log('支出更新成功:', response.data);\n        } else {\n          // 创建新支出\n          response = await axios.post(`${this.apiBaseUrl}/expenses`, expenseData);\n          console.log('支出创建成功:', response.data);\n        }\n\n        // 关闭对话框并刷新数据\n        this.showExpenseDialog = false;\n        this.fetchExpenses();\n        this.fetchExpenseComposition();\n        this.fetchIncomeComposition();\n        this.fetchTrends();\n        this.fetchMonthlySummary();\n      } catch (error) {\n        console.error('保存支出失败:', error);\n        if (error.response) {\n          console.error('错误状态码:', error.response.status);\n          console.error('错误响应:', error.response.data);\n          alert(`保存支出失败: ${error.response.data.message || '未知错误'}`);\n        } else {\n          alert('保存支出失败，请检查网络连接');\n        }\n      }\n    },\n    // 确认删除支出\n    confirmDeleteExpense(expense) {\n      this.expenseToDelete = expense;\n      this.showDeleteDialog = true;\n    },\n    // 删除支出\n    async deleteExpense() {\n      try {\n        console.log('删除支出:', this.expenseToDelete);\n        const response = await axios.delete(`${this.apiBaseUrl}/expenses/${this.expenseToDelete.id}`);\n        console.log('支出删除成功:', response.data);\n\n        // 关闭对话框并刷新数据\n        this.showDeleteDialog = false;\n        this.expenseToDelete = null;\n        this.fetchExpenses();\n        this.fetchExpenseComposition();\n        this.fetchIncomeComposition();\n        this.fetchTrends();\n        this.fetchMonthlySummary();\n      } catch (error) {\n        console.error('删除支出失败:', error);\n        if (error.response) {\n          console.error('错误状态码:', error.response.status);\n          console.error('错误响应:', error.response.data);\n          alert(`删除支出失败: ${error.response.data.message || '未知错误'}`);\n        } else {\n          alert('删除支出失败，请检查网络连接');\n        }\n      }\n    }\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.handleResize);\n    this.trendChart?.dispose();\n    this.incomePieChart?.dispose();\n    this.expensePieChart?.dispose();\n  }\n};","map":{"version":3,"names":["echarts","axios","name","data","monthlyIncome","monthlyExpense","monthlyProfit","incomeTrend","expenseTrend","profitTrend","startDate","getDefaultStartDate","endDate","getDefaultEndDate","selectedType","trendChart","incomePieChart","expensePieChart","transactions","expenses","expenseCategories","selectedCategory","currentExpense","id","expenseDate","category","amount","note","createdBy","showExpenseDialog","showDeleteDialog","expenseToDelete","loading","summary","trends","incomePie","expensePie","apiBaseUrl","activeTab","computed","filteredTransactions","filter","item","itemDate","Date","date","split","startDateObj","endDateObj","console","log","dateInRange","typeMatch","type","filteredExpenses","expense","categoryMatch","watch","fetchTransactions","fetchExpenseComposition","fetchIncomeComposition","fetchTrends","fetchExpenses","mounted","initCharts","fetchData","fetchExpenseCategories","methods","formatDateTime","fetchMonthlySummary","startDateTime","endDateTime","incomeResponse","get","params","expenseResponse","incomeTransactions","transaction","totalIncome","reduce","sum","totalExpense","totalProfit","prevStartDate","getPreviousPeriod","prevEndDate","prevStartDateTime","prevEndDateTime","prevIncomeResponse","prevExpenseResponse","prevIncomeTransactions","prevTotalIncome","prevTotalExpense","prevTotalProfit","incomeTrendValue","expenseTrendValue","profitTrendValue","当前收入","当前支出","当前利润","上期收入","上期支出","上期利润","收入趋势","支出趋势","利润趋势","toFixed","error","response","status","dateStr","setMonth","getMonth","toISOString","handleDateChange","transactionsResponse","expensesResponse","months","getMonthsInRange","labels","map","getFullYear","incomeData","Array","length","fill","forEach","transactionDate","monthIndex","findMonthIndex","expenseData","profitData","_","index","formattedIncomeData","value","formattedExpenseData","income","profit","updateTrendChart","startDateStr","endDateStr","start","end","current","push","targetYear","targetMonth","findIndex","month","transactionsData","incomeByCategory","chartData","Object","entries","percentage","sort","a","b","updateIncomePieChart","expensesData","expenseByCategory","updateExpensePieChart","incomes","undefined","init","$refs","window","addEventListener","handleResize","allValues","maxValue","Math","max","yAxisMax","ceil","setOption","title","text","left","textStyle","fontSize","fontWeight","tooltip","trigger","formatter","result","param","color","marker","seriesName","toLocaleString","minimumFractionDigits","maximumFractionDigits","legend","top","grid","right","bottom","containLabel","xAxis","boundaryGap","axisLabel","rotate","yAxis","series","itemStyle","lineStyle","width","areaStyle","graphic","LinearGradient","offset","smooth","symbol","symbolSize","parseFloat","orient","radius","emphasis","shadowBlur","shadowOffsetX","shadowColor","label","show","resize","formatNumber","num","formatDate","toLocaleDateString","openExpenseDialog","today","saveExpense","put","post","alert","message","confirmDeleteExpense","deleteExpense","delete","beforeDestroy","removeEventListener","dispose"],"sources":["src/components/FinancialPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"financial-page\">\r\n    <h1 class=\"page-title\">财务分析</h1>\r\n    \r\n    <!-- 功能区域选择 -->\r\n    <div class=\"function-tabs\">\r\n      <button \r\n        :class=\"['tab-button', { active: activeTab === 'analysis' }]\" \r\n        @click=\"activeTab = 'analysis'\">\r\n        财务分析\r\n      </button>\r\n      <button \r\n        :class=\"['tab-button', { active: activeTab === 'expense-manage' }]\" \r\n        @click=\"activeTab = 'expense-manage'\">\r\n        支出管理\r\n      </button>\r\n    </div>\r\n    \r\n    <!-- 财务分析部分 -->\r\n    <div v-if=\"activeTab === 'analysis'\">\r\n      <!-- 财务概览卡片 -->\r\n      <div class=\"financial-overview\">\r\n        <div class=\"overview-card income\">\r\n          <h3>选定期间收入</h3>\r\n          <div v-if=\"loading.summary\" class=\"loading-spinner\"></div>\r\n          <template v-else>\r\n            <div class=\"amount\">¥{{ formatNumber(monthlyIncome) }}</div>\r\n            <div class=\"trend\" :class=\"{ 'up': incomeTrend > 0, 'down': incomeTrend < 0 }\">\r\n              {{ incomeTrend > 0 ? '+' : '' }}{{ incomeTrend }}%\r\n            </div>\r\n          </template>\r\n        </div>\r\n        <div class=\"overview-card expense\">\r\n          <h3>选定期间支出</h3>\r\n          <div v-if=\"loading.summary\" class=\"loading-spinner\"></div>\r\n          <template v-else>\r\n            <div class=\"amount\">¥{{ formatNumber(monthlyExpense) }}</div>\r\n            <div class=\"trend\" :class=\"{ 'up': expenseTrend > 0, 'down': expenseTrend < 0 }\">\r\n              {{ expenseTrend > 0 ? '+' : '' }}{{ expenseTrend }}%\r\n            </div>\r\n          </template>\r\n        </div>\r\n        <div class=\"overview-card profit\">\r\n          <h3>选定期间利润</h3>\r\n          <div v-if=\"loading.summary\" class=\"loading-spinner\"></div>\r\n          <template v-else>\r\n            <div class=\"amount\">¥{{ formatNumber(monthlyProfit) }}</div>\r\n            <div class=\"trend\" :class=\"{ 'up': profitTrend > 0, 'down': profitTrend < 0 }\">\r\n              {{ profitTrend > 0 ? '+' : '' }}{{ profitTrend }}%\r\n            </div>\r\n          </template>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 日期范围选择器 -->\r\n      <div class=\"date-filter-section\">\r\n        <div class=\"date-range\">\r\n          <span>日期范围：</span>\r\n          <input type=\"date\" v-model=\"startDate\" class=\"date-input\" @change=\"handleDateChange\">\r\n          <span>至</span>\r\n          <input type=\"date\" v-model=\"endDate\" class=\"date-input\" @change=\"handleDateChange\">\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 图表区域 -->\r\n      <div class=\"charts-container\">\r\n        <!-- 收入支出趋势图 -->\r\n        <div class=\"chart-card\">\r\n          <h3>收入支出趋势</h3>\r\n          <div v-if=\"loading.trends\" class=\"chart-loading\">加载中...</div>\r\n          <div ref=\"trendChart\" class=\"chart\"></div>\r\n        </div>\r\n        \r\n        <!-- 收入构成饼图 -->\r\n        <div class=\"chart-card\">\r\n          <h3>收入构成</h3>\r\n          <div v-if=\"loading.incomePie\" class=\"chart-loading\">加载中...</div>\r\n          <div ref=\"incomePieChart\" class=\"chart\"></div>\r\n        </div>\r\n        \r\n        <!-- 支出构成饼图 -->\r\n        <div class=\"chart-card\">\r\n          <h3>支出构成</h3>\r\n          <div v-if=\"loading.expensePie\" class=\"chart-loading\">加载中...</div>\r\n          <div ref=\"expensePieChart\" class=\"chart\"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 详细数据表格 -->\r\n      <div class=\"data-table-container\">\r\n        <h3>财务明细</h3>\r\n        <div class=\"table-controls\">\r\n          <div class=\"date-range\">\r\n            <input type=\"date\" v-model=\"startDate\" class=\"date-input\">\r\n            <span>至</span>\r\n            <input type=\"date\" v-model=\"endDate\" class=\"date-input\">\r\n          </div>\r\n          <div class=\"table-filters\">\r\n            <select v-model=\"selectedType\" class=\"filter-select\">\r\n              <option value=\"all\">全部类型</option>\r\n              <option value=\"income\">收入</option>\r\n              <option value=\"expense\">支出</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        \r\n        <div v-if=\"loading.transactions\" class=\"table-loading\">\r\n          <div class=\"loading-spinner\"></div>\r\n          <div>加载交易数据中...</div>\r\n        </div>\r\n        \r\n        <table v-else class=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>日期</th>\r\n              <th>类型</th>\r\n              <th>分类</th>\r\n              <th>金额</th>\r\n              <th>备注</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"item in filteredTransactions\" :key=\"item.id\">\r\n              <td>{{ formatDate(item.date) }}</td>\r\n              <td>\r\n                <span :class=\"['type-badge', item.type]\">\r\n                  {{ item.type === 'income' ? '收入' : '支出' }}\r\n                </span>\r\n              </td>\r\n              <td>{{ item.category }}</td>\r\n              <td :class=\"item.type === 'income' ? 'income-amount' : 'expense-amount'\">\r\n                {{ item.type === 'income' ? '+' : '-' }}¥{{ formatNumber(item.amount) }}\r\n              </td>\r\n              <td>{{ item.note }}</td>\r\n            </tr>\r\n            <tr v-if=\"filteredTransactions.length === 0\">\r\n              <td colspan=\"5\" class=\"no-data\">没有符合条件的交易记录</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 支出管理部分 -->\r\n    <div v-if=\"activeTab === 'expense-manage'\" class=\"expense-manage\">\r\n      <div class=\"expense-header\">\r\n        <h3>支出管理</h3>\r\n        <button class=\"add-button\" @click=\"openExpenseDialog(null)\">添加支出</button>\r\n      </div>\r\n\r\n      <!-- 支出筛选器 -->\r\n      <div class=\"filter-section\">\r\n        <div class=\"date-range\">\r\n          <input type=\"date\" v-model=\"startDate\" class=\"date-input\">\r\n          <span>至</span>\r\n          <input type=\"date\" v-model=\"endDate\" class=\"date-input\">\r\n        </div>\r\n        <div class=\"category-filter\">\r\n          <select v-model=\"selectedCategory\" class=\"filter-select\">\r\n            <option value=\"\">全部类别</option>\r\n            <option v-for=\"category in expenseCategories\" :key=\"category\" :value=\"category\">\r\n              {{ category }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 支出列表 -->\r\n      <div v-if=\"loading.expenses\" class=\"loading-container\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <div>加载支出数据中...</div>\r\n      </div>\r\n      <div v-else class=\"expense-list\">\r\n        <table class=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>日期</th>\r\n              <th>类别</th>\r\n              <th>金额</th>\r\n              <th>备注</th>\r\n              <th>创建人</th>\r\n              <th>操作</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"expense in filteredExpenses\" :key=\"expense.id\">\r\n              <td>{{ formatDate(expense.expenseDate) }}</td>\r\n              <td>\r\n                <span class=\"category-badge\">{{ expense.category }}</span>\r\n              </td>\r\n              <td class=\"expense-amount\">¥{{ formatNumber(expense.amount) }}</td>\r\n              <td>{{ expense.note || '无' }}</td>\r\n              <td>{{ expense.createdBy }}</td>\r\n              <td class=\"actions\">\r\n                <button class=\"action-button edit\" @click=\"openExpenseDialog(expense)\">编辑</button>\r\n                <button class=\"action-button delete\" @click=\"confirmDeleteExpense(expense)\">删除</button>\r\n              </td>\r\n            </tr>\r\n            <tr v-if=\"filteredExpenses.length === 0\">\r\n              <td colspan=\"6\" class=\"no-data\">没有符合条件的支出记录</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <!-- 支出编辑对话框 -->\r\n      <div v-if=\"showExpenseDialog\" class=\"dialog-overlay\" @click.self=\"showExpenseDialog = false\">\r\n        <div class=\"dialog-content\">\r\n          <h3>{{ currentExpense.id ? '编辑支出' : '添加支出' }}</h3>\r\n          <form @submit.prevent=\"saveExpense\">\r\n            <div class=\"form-group\">\r\n              <label for=\"expenseDate\">支出日期</label>\r\n              <input type=\"date\" id=\"expenseDate\" v-model=\"currentExpense.expenseDate\" required>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"category\">支出类别</label>\r\n              <select id=\"category\" v-model=\"currentExpense.category\" required>\r\n                <option v-for=\"category in expenseCategories\" :key=\"category\" :value=\"category\">\r\n                  {{ category }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"amount\">金额</label>\r\n              <input type=\"number\" id=\"amount\" v-model=\"currentExpense.amount\" step=\"0.01\" min=\"0\" required>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"note\">备注</label>\r\n              <textarea id=\"note\" v-model=\"currentExpense.note\" rows=\"3\"></textarea>\r\n            </div>\r\n            <div class=\"form-buttons\">\r\n              <button type=\"button\" class=\"cancel-button\" @click=\"showExpenseDialog = false\">取消</button>\r\n              <button type=\"submit\" class=\"save-button\">保存</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 删除确认对话框 -->\r\n      <div v-if=\"showDeleteDialog\" class=\"dialog-overlay\" @click.self=\"showDeleteDialog = false\">\r\n        <div class=\"dialog-content delete-dialog\">\r\n          <h3>确认删除</h3>\r\n          <p>您确定要删除这条支出记录吗？此操作不可撤销。</p>\r\n          <div class=\"form-buttons\">\r\n            <button class=\"cancel-button\" @click=\"showDeleteDialog = false\">取消</button>\r\n            <button class=\"delete-button\" @click=\"deleteExpense\">删除</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'FinancialPage',\r\n  data() {\r\n    return {\r\n      // 概览数据\r\n      monthlyIncome: 0,\r\n      monthlyExpense: 0,\r\n      monthlyProfit: 0,\r\n      incomeTrend: 0,\r\n      expenseTrend: 0,\r\n      profitTrend: 0,\r\n\r\n      // 日期范围\r\n      startDate: this.getDefaultStartDate(),\r\n      endDate: this.getDefaultEndDate(),\r\n      selectedType: 'all',\r\n\r\n      // 图表实例\r\n      trendChart: null,\r\n      incomePieChart: null,\r\n      expensePieChart: null,\r\n\r\n      // 交易数据\r\n      transactions: [],\r\n      \r\n      // 支出管理相关数据\r\n      expenses: [],\r\n      expenseCategories: [],\r\n      selectedCategory: '',\r\n      currentExpense: {\r\n        id: null,\r\n        expenseDate: '',\r\n        category: '',\r\n        amount: 0,\r\n        note: '',\r\n        createdBy: 'admin'\r\n      },\r\n      showExpenseDialog: false,\r\n      showDeleteDialog: false,\r\n      expenseToDelete: null,\r\n      \r\n      // 加载状态\r\n      loading: {\r\n        summary: false,\r\n        trends: false,\r\n        incomePie: false,\r\n        expensePie: false,\r\n        transactions: false,\r\n        expenses: false\r\n      },\r\n      \r\n      // API基础URL\r\n      apiBaseUrl: 'http://localhost:5050/api',\r\n\r\n      // 功能区域选择\r\n      activeTab: 'analysis'\r\n    }\r\n  },\r\n  computed: {\r\n    filteredTransactions() {\r\n      return this.transactions.filter(item => {\r\n        // 将字符串日期转换为Date对象进行比较\r\n        const itemDate = new Date(item.date.split('T')[0])\r\n        const startDateObj = new Date(this.startDate)\r\n        const endDateObj = new Date(this.endDate)\r\n        \r\n        // 添加调试日志\r\n        console.log('过滤交易记录:', item.id, itemDate, startDateObj <= itemDate, itemDate <= endDateObj)\r\n        \r\n        const dateInRange = startDateObj <= itemDate && itemDate <= endDateObj\r\n        const typeMatch = this.selectedType === 'all' || item.type === this.selectedType\r\n        return dateInRange && typeMatch\r\n      })\r\n    },\r\n    filteredExpenses() {\r\n      return this.expenses.filter(expense => {\r\n        // 日期过滤\r\n        const expenseDate = new Date(expense.expenseDate.split('T')[0])\r\n        const startDateObj = new Date(this.startDate)\r\n        const endDateObj = new Date(this.endDate)\r\n        const dateInRange = startDateObj <= expenseDate && expenseDate <= endDateObj\r\n        \r\n        // 类别过滤\r\n        const categoryMatch = !this.selectedCategory || expense.category === this.selectedCategory\r\n        \r\n        return dateInRange && categoryMatch\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    startDate() {\r\n      this.fetchTransactions()\r\n      this.fetchExpenseComposition()\r\n      this.fetchIncomeComposition()\r\n      this.fetchTrends()\r\n    },\r\n    endDate() {\r\n      this.fetchTransactions()\r\n      this.fetchExpenseComposition()\r\n      this.fetchIncomeComposition()\r\n      this.fetchTrends()\r\n    },\r\n    selectedCategory() {\r\n      // 当选择的类别变化时更新过滤结果\r\n      console.log('支出类别筛选变更为:', this.selectedCategory)\r\n      this.fetchExpenses()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initCharts()\r\n    this.fetchData()\r\n    this.fetchExpenseCategories()\r\n  },\r\n  methods: {\r\n    // 获取默认开始日期（当年1月1日）\r\n    getDefaultStartDate() {\r\n      return '2024-01-01'\r\n    },\r\n    \r\n    // 获取默认结束日期（2024年12月31日）\r\n    getDefaultEndDate() {\r\n      return '2024-12-31'\r\n    },\r\n    \r\n    // 格式化日期时间\r\n    formatDateTime(date) {\r\n      return date + 'T00:00:00'\r\n    },\r\n    \r\n    // 获取所有数据\r\n    fetchData() {\r\n      console.log('开始获取财务数据...')\r\n      this.fetchMonthlySummary()\r\n      this.fetchTrends()\r\n      this.fetchIncomeComposition()\r\n      this.fetchExpenseComposition()\r\n      this.fetchTransactions()\r\n      this.fetchExpenses()\r\n    },\r\n    \r\n    // 获取月度概览数据\r\n    async fetchMonthlySummary() {\r\n      this.loading.summary = true\r\n      try {\r\n        console.log('正在计算选定期间财务数据...')\r\n        \r\n        const startDateTime = this.formatDateTime(this.startDate)\r\n        const endDateTime = this.formatDateTime(this.endDate)\r\n        \r\n        // 获取收入数据\r\n        const incomeResponse = await axios.get(`${this.apiBaseUrl}/finance/transactions`, {\r\n          params: {\r\n            startDate: startDateTime,\r\n            endDate: endDateTime\r\n          }\r\n        })\r\n        \r\n        // 获取支出数据\r\n        const expenseResponse = await axios.get(`${this.apiBaseUrl}/expenses`, {\r\n          params: {\r\n            startDate: startDateTime,\r\n            endDate: endDateTime\r\n          }\r\n        })\r\n        \r\n        // 计算收入总额\r\n        const incomeTransactions = incomeResponse.data.filter(transaction => transaction.type === 'income')\r\n        const totalIncome = incomeTransactions.reduce((sum, transaction) => sum + transaction.amount, 0)\r\n        \r\n        // 计算支出总额\r\n        const totalExpense = expenseResponse.data.reduce((sum, expense) => sum + expense.amount, 0)\r\n        \r\n        // 计算利润\r\n        const totalProfit = totalIncome - totalExpense\r\n        \r\n        // 获取上个月同期数据进行同比计算\r\n        const prevStartDate = this.getPreviousPeriod(this.startDate)\r\n        const prevEndDate = this.getPreviousPeriod(this.endDate)\r\n        \r\n        const prevStartDateTime = this.formatDateTime(prevStartDate)\r\n        const prevEndDateTime = this.formatDateTime(prevEndDate)\r\n        \r\n        // 获取上期收入数据\r\n        const prevIncomeResponse = await axios.get(`${this.apiBaseUrl}/finance/transactions`, {\r\n          params: {\r\n            startDate: prevStartDateTime,\r\n            endDate: prevEndDateTime\r\n          }\r\n        })\r\n        \r\n        // 获取上期支出数据\r\n        const prevExpenseResponse = await axios.get(`${this.apiBaseUrl}/expenses`, {\r\n          params: {\r\n            startDate: prevStartDateTime,\r\n            endDate: prevEndDateTime\r\n          }\r\n        })\r\n        \r\n        // 计算上期收入总额\r\n        const prevIncomeTransactions = prevIncomeResponse.data.filter(transaction => transaction.type === 'income')\r\n        const prevTotalIncome = prevIncomeTransactions.reduce((sum, transaction) => sum + transaction.amount, 0)\r\n        \r\n        // 计算上期支出总额\r\n        const prevTotalExpense = prevExpenseResponse.data.reduce((sum, expense) => sum + expense.amount, 0)\r\n        \r\n        // 计算上期利润\r\n        const prevTotalProfit = prevTotalIncome - prevTotalExpense\r\n        \r\n        // 计算同比变化率\r\n        const incomeTrendValue = prevTotalIncome > 0 ? ((totalIncome - prevTotalIncome) / prevTotalIncome * 100) : 0\r\n        const expenseTrendValue = prevTotalExpense > 0 ? ((totalExpense - prevTotalExpense) / prevTotalExpense * 100) : 0\r\n        const profitTrendValue = prevTotalProfit > 0 ? ((totalProfit - prevTotalProfit) / prevTotalProfit * 100) : 0\r\n        \r\n        console.log('计算的财务数据:', {\r\n          当前收入: totalIncome,\r\n          当前支出: totalExpense,\r\n          当前利润: totalProfit,\r\n          上期收入: prevTotalIncome,\r\n          上期支出: prevTotalExpense,\r\n          上期利润: prevTotalProfit,\r\n          收入趋势: incomeTrendValue,\r\n          支出趋势: expenseTrendValue,\r\n          利润趋势: profitTrendValue\r\n        })\r\n        \r\n        // 更新数据\r\n        this.monthlyIncome = totalIncome\r\n        this.monthlyExpense = totalExpense\r\n        this.monthlyProfit = totalProfit\r\n        this.incomeTrend = incomeTrendValue.toFixed(1)\r\n        this.expenseTrend = expenseTrendValue.toFixed(1)\r\n        this.profitTrend = profitTrendValue.toFixed(1)\r\n      } catch (error) {\r\n        console.error('计算财务数据失败:', error)\r\n        if (error.response) {\r\n          console.error('错误状态码:', error.response.status)\r\n          console.error('错误响应:', error.response.data)\r\n        }\r\n        // 重置数据\r\n        this.monthlyIncome = 0\r\n        this.monthlyExpense = 0\r\n        this.monthlyProfit = 0\r\n        this.incomeTrend = 0\r\n        this.expenseTrend = 0\r\n        this.profitTrend = 0\r\n      } finally {\r\n        this.loading.summary = false\r\n      }\r\n    },\r\n    \r\n    // 获取上一个时间段的日期\r\n    getPreviousPeriod(dateStr) {\r\n      const date = new Date(dateStr)\r\n      date.setMonth(date.getMonth() - 1)\r\n      return date.toISOString().split('T')[0]\r\n    },\r\n    \r\n    // 处理日期变化\r\n    handleDateChange() {\r\n      console.log('日期范围变更为:', this.startDate, '至', this.endDate)\r\n      this.fetchMonthlySummary()\r\n      this.fetchTrends()\r\n      this.fetchIncomeComposition()\r\n      this.fetchExpenseComposition()\r\n      this.fetchTransactions()\r\n      this.fetchExpenses()\r\n    },\r\n    \r\n    // 获取趋势数据\r\n    async fetchTrends() {\r\n      this.loading.trends = true\r\n      try {\r\n        console.log('正在生成趋势数据...')\r\n        \r\n        const startDateTime = this.formatDateTime(this.startDate)\r\n        const endDateTime = this.formatDateTime(this.endDate)\r\n        \r\n        // 获取交易数据\r\n        const transactionsResponse = await axios.get(`${this.apiBaseUrl}/finance/transactions`, {\r\n          params: {\r\n            startDate: startDateTime,\r\n            endDate: endDateTime\r\n          }\r\n        })\r\n        \r\n        const incomeTransactions = transactionsResponse.data.filter(transaction => \r\n          transaction.type === 'income'\r\n        )\r\n        \r\n        // 获取支出数据\r\n        const expensesResponse = await axios.get(`${this.apiBaseUrl}/expenses`, {\r\n          params: {\r\n            startDate: startDateTime,\r\n            endDate: endDateTime\r\n          }\r\n        })\r\n        \r\n        const expenses = expensesResponse.data\r\n        \r\n        // 准备月份标签和数据\r\n        const months = this.getMonthsInRange(this.startDate, this.endDate)\r\n        const labels = months.map(date => `${date.getFullYear()}年${date.getMonth() + 1}月`)\r\n        \r\n        // 按月份统计收入\r\n        const incomeData = new Array(months.length).fill(0)\r\n        incomeTransactions.forEach(transaction => {\r\n          const transactionDate = new Date(transaction.date)\r\n          const monthIndex = this.findMonthIndex(months, transactionDate)\r\n          if (monthIndex !== -1) {\r\n            incomeData[monthIndex] += transaction.amount\r\n          }\r\n        })\r\n        \r\n        // 按月份统计支出\r\n        const expenseData = new Array(months.length).fill(0)\r\n        expenses.forEach(expense => {\r\n          const expenseDate = new Date(expense.expenseDate)\r\n          const monthIndex = this.findMonthIndex(months, expenseDate)\r\n          if (monthIndex !== -1) {\r\n            expenseData[monthIndex] += expense.amount\r\n          }\r\n        })\r\n        \r\n        // 计算利润\r\n        const profitData = months.map((_, index) => {\r\n          return +(incomeData[index] - expenseData[index]).toFixed(2)\r\n        })\r\n        \r\n        // 确保数据为两位小数\r\n        const formattedIncomeData = incomeData.map(value => +value.toFixed(2))\r\n        const formattedExpenseData = expenseData.map(value => +value.toFixed(2))\r\n        \r\n        console.log('生成的趋势数据:', {\r\n          labels,\r\n          income: formattedIncomeData,\r\n          expense: formattedExpenseData,\r\n          profit: profitData\r\n        })\r\n        \r\n        // 更新趋势图\r\n        this.updateTrendChart(labels, formattedIncomeData, formattedExpenseData, profitData)\r\n      } catch (error) {\r\n        console.error('生成趋势数据失败:', error)\r\n        if (error.response) {\r\n          console.error('错误状态码:', error.response.status)\r\n          console.error('错误响应:', error.response.data)\r\n        }\r\n      } finally {\r\n        this.loading.trends = false\r\n      }\r\n    },\r\n    \r\n    // 获取日期范围内的所有月份\r\n    getMonthsInRange(startDateStr, endDateStr) {\r\n      const startDate = new Date(startDateStr)\r\n      const endDate = new Date(endDateStr)\r\n      \r\n      // 确保日期是月份的第一天，方便比较\r\n      const start = new Date(startDate.getFullYear(), startDate.getMonth(), 1)\r\n      const end = new Date(endDate.getFullYear(), endDate.getMonth(), 1)\r\n      \r\n      const months = []\r\n      const current = new Date(start)\r\n      \r\n      while (current <= end) {\r\n        months.push(new Date(current))\r\n        current.setMonth(current.getMonth() + 1)\r\n      }\r\n      \r\n      return months\r\n    },\r\n    \r\n    // 查找日期对应的月份索引\r\n    findMonthIndex(months, date) {\r\n      const targetYear = date.getFullYear()\r\n      const targetMonth = date.getMonth()\r\n      \r\n      return months.findIndex(month => \r\n        month.getFullYear() === targetYear && month.getMonth() === targetMonth\r\n      )\r\n    },\r\n    \r\n    // 获取收入构成数据\r\n    async fetchIncomeComposition() {\r\n      this.loading.incomePie = true\r\n      try {\r\n        console.log('正在获取收入构成数据...')\r\n        \r\n        const startDateTime = this.formatDateTime(this.startDate)\r\n        const endDateTime = this.formatDateTime(this.endDate)\r\n        \r\n        // 从/api/finance/transactions接口获取原始交易数据\r\n        const response = await axios.get(`${this.apiBaseUrl}/finance/transactions`, {\r\n          params: {\r\n            startDate: startDateTime,\r\n            endDate: endDateTime\r\n          }\r\n        })\r\n        \r\n        const transactionsData = response.data\r\n        console.log('原始交易数据:', transactionsData)\r\n        \r\n        // 筛选出收入类型的交易记录\r\n        const incomeTransactions = transactionsData.filter(transaction => transaction.type === 'income')\r\n        \r\n        // 按类别分组统计收入金额\r\n        const incomeByCategory = {}\r\n        let totalIncome = 0\r\n        \r\n        for (const transaction of incomeTransactions) {\r\n          const category = transaction.category\r\n          if (!incomeByCategory[category]) {\r\n            incomeByCategory[category] = 0\r\n          }\r\n          incomeByCategory[category] += transaction.amount\r\n          totalIncome += transaction.amount\r\n        }\r\n        \r\n        // 转换为饼图所需格式，并计算百分比\r\n        const chartData = []\r\n        for (const [category, amount] of Object.entries(incomeByCategory)) {\r\n          const percentage = (amount / totalIncome * 100) || 0\r\n          chartData.push({\r\n            name: category,\r\n            value: amount.toFixed(2),\r\n            percentage: percentage.toFixed(1)\r\n          })\r\n        }\r\n        \r\n        // 按金额降序排序\r\n        chartData.sort((a, b) => b.value - a.value)\r\n        \r\n        // 如果没有收入数据，添加一条空数据\r\n        if (chartData.length === 0) {\r\n          chartData.push({ name: '暂无收入', value: 0, percentage: 0 })\r\n        }\r\n        \r\n        console.log('处理后的收入构成数据:', chartData)\r\n        \r\n        // 更新收入饼图\r\n        this.updateIncomePieChart(chartData)\r\n      } catch (error) {\r\n        console.error('获取收入构成数据失败:', error)\r\n        if (error.response) {\r\n          console.error('错误状态码:', error.response.status)\r\n          console.error('错误响应:', error.response.data)\r\n        }\r\n      } finally {\r\n        this.loading.incomePie = false\r\n      }\r\n    },\r\n    \r\n    // 获取支出构成数据\r\n    async fetchExpenseComposition() {\r\n      this.loading.expensePie = true\r\n      try {\r\n        console.log('正在获取支出构成数据...')\r\n        \r\n        const startDateTime = this.formatDateTime(this.startDate)\r\n        const endDateTime = this.formatDateTime(this.endDate)\r\n        \r\n        // 从/api/expenses接口获取原始支出数据\r\n        const response = await axios.get(`${this.apiBaseUrl}/expenses`, {\r\n          params: {\r\n            startDate: startDateTime,\r\n            endDate: endDateTime\r\n          }\r\n        })\r\n        \r\n        const expensesData = response.data\r\n        console.log('原始支出数据:', expensesData)\r\n        \r\n        // 按类别分组统计支出金额\r\n        const expenseByCategory = {}\r\n        let totalExpense = 0\r\n        \r\n        for (const expense of expensesData) {\r\n          const category = expense.category\r\n          if (!expenseByCategory[category]) {\r\n            expenseByCategory[category] = 0\r\n          }\r\n          expenseByCategory[category] += expense.amount\r\n          totalExpense += expense.amount\r\n        }\r\n        \r\n        // 转换为饼图所需格式，并计算百分比\r\n        const chartData = []\r\n        for (const [category, amount] of Object.entries(expenseByCategory)) {\r\n          const percentage = (amount / totalExpense * 100) || 0\r\n          chartData.push({\r\n            name: category,\r\n            value: amount.toFixed(2),\r\n            percentage: percentage.toFixed(1)\r\n          })\r\n        }\r\n        \r\n        // 按金额降序排序\r\n        chartData.sort((a, b) => b.value - a.value)\r\n        \r\n        // 如果没有支出数据，添加一条空数据\r\n        if (chartData.length === 0) {\r\n          chartData.push({ name: '暂无支出', value: 0, percentage: 0 })\r\n        }\r\n        \r\n        console.log('处理后的支出构成数据:', chartData)\r\n        \r\n        // 更新支出饼图\r\n        this.updateExpensePieChart(chartData)\r\n      } catch (error) {\r\n        console.error('获取支出构成数据失败:', error)\r\n        if (error.response) {\r\n          console.error('错误状态码:', error.response.status)\r\n          console.error('错误响应:', error.response.data)\r\n        }\r\n      } finally {\r\n        this.loading.expensePie = false\r\n      }\r\n    },\r\n    \r\n    // 获取交易明细数据\r\n    async fetchTransactions() {\r\n      this.loading.transactions = true\r\n      try {\r\n        console.log('正在获取交易明细数据...')\r\n        console.log('日期范围:', this.startDate, '至', this.endDate)\r\n        \r\n        const startDateTime = this.formatDateTime(this.startDate)\r\n        const endDateTime = this.formatDateTime(this.endDate)\r\n        \r\n        // 获取支出数据\r\n        console.log('正在请求支出数据...')\r\n        const expenseResponse = await axios.get(`${this.apiBaseUrl}/expenses`, {\r\n          params: {\r\n            startDate: startDateTime,\r\n            endDate: endDateTime\r\n          }\r\n        })\r\n        console.log('支出数据响应:', expenseResponse.data)\r\n        \r\n        // 获取收入数据\r\n        console.log('正在请求收入数据...')\r\n        const incomeResponse = await axios.get(`${this.apiBaseUrl}/finance/transactions`, {\r\n          params: {\r\n            startDate: startDateTime,\r\n            endDate: endDateTime\r\n          }\r\n        })\r\n        console.log('收入数据响应:', incomeResponse.data)\r\n        \r\n        // 处理支出数据\r\n        const expenses = expenseResponse.data.map(expense => ({\r\n          id: expense.id,\r\n          date: expense.expenseDate,\r\n          type: 'expense',\r\n          category: expense.category,\r\n          amount: expense.amount,\r\n          note: expense.note\r\n        }))\r\n        \r\n        // 处理收入数据\r\n        const incomes = incomeResponse.data.map(income => ({\r\n          id: income.id,\r\n          date: income.date,\r\n          type: 'income',\r\n          category: income.category,\r\n          amount: income.amount,\r\n          note: income.note\r\n        }))\r\n        \r\n        // 合并并排序\r\n        this.transactions = [...expenses, ...incomes].sort((a, b) => {\r\n          return new Date(b.date) - new Date(a.date)\r\n        })\r\n        \r\n        console.log('合并后的交易数据:', this.transactions)\r\n      } catch (error) {\r\n        console.error('获取交易明细数据失败:', error)\r\n        if (error.response) {\r\n          console.error('错误状态码:', error.response.status)\r\n          console.error('错误响应:', error.response.data)\r\n        }\r\n        this.transactions = []\r\n      } finally {\r\n        this.loading.transactions = false\r\n      }\r\n    },\r\n    \r\n    // 获取支出数据\r\n    async fetchExpenses() {\r\n      this.loading.expenses = true\r\n      try {\r\n        console.log('正在获取支出数据...')\r\n        \r\n        const startDateTime = this.formatDateTime(this.startDate)\r\n        const endDateTime = this.formatDateTime(this.endDate)\r\n        \r\n        const response = await axios.get(`${this.apiBaseUrl}/expenses`, {\r\n          params: {\r\n            startDate: startDateTime,\r\n            endDate: endDateTime,\r\n            category: this.selectedCategory || undefined\r\n          }\r\n        })\r\n        \r\n        this.expenses = response.data\r\n        console.log('支出数据:', this.expenses)\r\n      } catch (error) {\r\n        console.error('获取支出数据失败:', error)\r\n        if (error.response) {\r\n          console.error('错误状态码:', error.response.status)\r\n          console.error('错误响应:', error.response.data)\r\n        }\r\n        this.expenses = []\r\n      } finally {\r\n        this.loading.expenses = false\r\n      }\r\n    },\r\n    \r\n    // 获取支出类别\r\n    async fetchExpenseCategories() {\r\n      try {\r\n        console.log('正在获取支出类别...')\r\n        const response = await axios.get(`${this.apiBaseUrl}/expenses/categories`)\r\n        this.expenseCategories = response.data\r\n        console.log('支出类别:', this.expenseCategories)\r\n      } catch (error) {\r\n        console.error('获取支出类别失败:', error)\r\n        // 设置默认类别\r\n        this.expenseCategories = ['原料采购', '人工成本', '水电费用', '设备维护', '店铺租金', '其他支出']\r\n      }\r\n    },\r\n    \r\n    // 初始化图表\r\n    initCharts() {\r\n      // 初始化趋势图\r\n      this.trendChart = echarts.init(this.$refs.trendChart)\r\n      \r\n      // 初始化收入构成饼图\r\n      this.incomePieChart = echarts.init(this.$refs.incomePieChart)\r\n      \r\n      // 初始化支出构成饼图\r\n      this.expensePieChart = echarts.init(this.$refs.expensePieChart)\r\n      \r\n      // 监听窗口大小变化，调整图表大小\r\n      window.addEventListener('resize', this.handleResize)\r\n    },\r\n    \r\n    // 更新趋势图\r\n    updateTrendChart(labels, incomeData, expenseData, profitData) {\r\n      // 计算合适的Y轴最大值\r\n      const allValues = [...incomeData, ...expenseData, ...profitData]\r\n      const maxValue = Math.max(...allValues)\r\n      const yAxisMax = Math.ceil(maxValue * 1.1 / 1000) * 1000 // 向上取整到最近的1000\r\n      \r\n      this.trendChart.setOption({\r\n        title: {\r\n          text: '收支趋势',\r\n          left: 'center',\r\n          textStyle: {\r\n            fontSize: 16,\r\n            fontWeight: 'normal'\r\n          }\r\n        },\r\n        tooltip: {\r\n          trigger: 'axis',\r\n          formatter: function(params) {\r\n            let result = params[0].name + '<br/>'\r\n            params.forEach(param => {\r\n              const color = param.color\r\n              const marker = `<span style=\"display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;background-color:${color};\"></span>`\r\n              result += marker + param.seriesName + ': ¥' + param.value.toLocaleString('zh-CN', {\r\n                minimumFractionDigits: 2,\r\n                maximumFractionDigits: 2\r\n              }) + '<br/>'\r\n            })\r\n            return result\r\n          }\r\n        },\r\n        legend: {\r\n          data: ['收入', '支出', '利润'],\r\n          top: 'bottom'\r\n        },\r\n        grid: {\r\n          left: '3%',\r\n          right: '4%',\r\n          bottom: '15%',\r\n          top: '10%',\r\n          containLabel: true\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          boundaryGap: false,\r\n          data: labels,\r\n          axisLabel: {\r\n            rotate: labels.length > 6 ? 45 : 0\r\n          }\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          max: yAxisMax,\r\n          axisLabel: {\r\n            formatter: value => '¥' + value.toLocaleString('zh-CN')\r\n          }\r\n        },\r\n        series: [\r\n          {\r\n            name: '收入',\r\n            type: 'line',\r\n            data: incomeData,\r\n            itemStyle: {\r\n              color: '#4CAF50'\r\n            },\r\n            lineStyle: {\r\n              width: 3\r\n            },\r\n            areaStyle: {\r\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n                { offset: 0, color: 'rgba(76, 175, 80, 0.4)' },\r\n                { offset: 1, color: 'rgba(76, 175, 80, 0.1)' }\r\n              ])\r\n            },\r\n            smooth: true,\r\n            symbol: 'circle',\r\n            symbolSize: 8\r\n          },\r\n          {\r\n            name: '支出',\r\n            type: 'line',\r\n            data: expenseData,\r\n            itemStyle: {\r\n              color: '#F44336'\r\n            },\r\n            lineStyle: {\r\n              width: 3\r\n            },\r\n            areaStyle: {\r\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n                { offset: 0, color: 'rgba(244, 67, 54, 0.4)' },\r\n                { offset: 1, color: 'rgba(244, 67, 54, 0.1)' }\r\n              ])\r\n            },\r\n            smooth: true,\r\n            symbol: 'circle',\r\n            symbolSize: 8\r\n          },\r\n          {\r\n            name: '利润',\r\n            type: 'line',\r\n            data: profitData,\r\n            itemStyle: {\r\n              color: '#2196F3'\r\n            },\r\n            lineStyle: {\r\n              width: 3\r\n            },\r\n            areaStyle: {\r\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n                { offset: 0, color: 'rgba(33, 150, 243, 0.4)' },\r\n                { offset: 1, color: 'rgba(33, 150, 243, 0.1)' }\r\n              ])\r\n            },\r\n            smooth: true,\r\n            symbol: 'circle',\r\n            symbolSize: 8\r\n          }\r\n        ]\r\n      })\r\n    },\r\n    \r\n    // 更新收入构成饼图\r\n    updateIncomePieChart(data) {\r\n      const chartData = data.map(item => ({\r\n        name: item.name,\r\n        value: parseFloat(item.value)\r\n      }))\r\n      \r\n      this.incomePieChart.setOption({\r\n        title: {\r\n          text: '收入构成'\r\n        },\r\n        tooltip: {\r\n          trigger: 'item',\r\n          formatter: '{a} <br/>{b}: {c} ({d}%)'\r\n        },\r\n        legend: {\r\n          orient: 'vertical',\r\n          left: 'left',\r\n          type: 'scroll'\r\n        },\r\n        series: [\r\n          {\r\n            name: '收入来源',\r\n            type: 'pie',\r\n            radius: '50%',\r\n            data: chartData,\r\n            emphasis: {\r\n              itemStyle: {\r\n                shadowBlur: 10,\r\n                shadowOffsetX: 0,\r\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n              }\r\n            },\r\n            label: {\r\n              show: true,\r\n              formatter: '{b}: {d}%'\r\n            }\r\n          }\r\n        ]\r\n      })\r\n    },\r\n    \r\n    // 更新支出构成饼图\r\n    updateExpensePieChart(data) {\r\n      const chartData = data.map(item => ({\r\n        name: item.name,\r\n        value: parseFloat(item.value)\r\n      }))\r\n      \r\n      this.expensePieChart.setOption({\r\n        title: {\r\n          text: '支出构成'\r\n        },\r\n        tooltip: {\r\n          trigger: 'item',\r\n          formatter: '{a} <br/>{b}: {c} ({d}%)'\r\n        },\r\n        legend: {\r\n          orient: 'vertical',\r\n          left: 'left',\r\n          type: 'scroll'\r\n        },\r\n        series: [\r\n          {\r\n            name: '支出类别',\r\n            type: 'pie',\r\n            radius: '50%',\r\n            data: chartData,\r\n            emphasis: {\r\n              itemStyle: {\r\n                shadowBlur: 10,\r\n                shadowOffsetX: 0,\r\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n              }\r\n            },\r\n            label: {\r\n              show: true,\r\n              formatter: '{b}: {d}%'\r\n            }\r\n          }\r\n        ]\r\n      })\r\n    },\r\n    \r\n    handleResize() {\r\n      this.trendChart?.resize()\r\n      this.incomePieChart?.resize()\r\n      this.expensePieChart?.resize()\r\n    },\r\n    \r\n    formatNumber(num) {\r\n      return num.toLocaleString('zh-CN', {\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2\r\n      })\r\n    },\r\n    \r\n    formatDate(dateStr) {\r\n      const date = new Date(dateStr)\r\n      return date.toLocaleDateString('zh-CN')\r\n    },\r\n    \r\n    // 打开支出编辑对话框\r\n    openExpenseDialog(expense) {\r\n      if (expense) {\r\n        // 编辑现有支出\r\n        this.currentExpense = {\r\n          id: expense.id,\r\n          expenseDate: expense.expenseDate.split('T')[0],\r\n          category: expense.category,\r\n          amount: expense.amount,\r\n          note: expense.note || '',\r\n          createdBy: expense.createdBy\r\n        }\r\n      } else {\r\n        // 添加新支出\r\n        const today = new Date().toISOString().split('T')[0]\r\n        this.currentExpense = {\r\n          id: null,\r\n          expenseDate: today,\r\n          category: this.expenseCategories.length > 0 ? this.expenseCategories[0] : '',\r\n          amount: 0,\r\n          note: '',\r\n          createdBy: 'admin'\r\n        }\r\n      }\r\n      this.showExpenseDialog = true\r\n    },\r\n    \r\n    // 保存支出\r\n    async saveExpense() {\r\n      try {\r\n        console.log('保存支出:', this.currentExpense)\r\n        \r\n        const expenseData = {\r\n          ...this.currentExpense,\r\n          expenseDate: this.formatDateTime(this.currentExpense.expenseDate),\r\n          amount: parseFloat(this.currentExpense.amount)\r\n        }\r\n        \r\n        let response\r\n        \r\n        if (this.currentExpense.id) {\r\n          // 更新已有支出\r\n          response = await axios.put(`${this.apiBaseUrl}/expenses/${this.currentExpense.id}`, expenseData)\r\n          console.log('支出更新成功:', response.data)\r\n        } else {\r\n          // 创建新支出\r\n          response = await axios.post(`${this.apiBaseUrl}/expenses`, expenseData)\r\n          console.log('支出创建成功:', response.data)\r\n        }\r\n        \r\n        // 关闭对话框并刷新数据\r\n        this.showExpenseDialog = false\r\n        this.fetchExpenses()\r\n        this.fetchExpenseComposition()\r\n        this.fetchIncomeComposition()\r\n        this.fetchTrends()\r\n        this.fetchMonthlySummary()\r\n      } catch (error) {\r\n        console.error('保存支出失败:', error)\r\n        if (error.response) {\r\n          console.error('错误状态码:', error.response.status)\r\n          console.error('错误响应:', error.response.data)\r\n          alert(`保存支出失败: ${error.response.data.message || '未知错误'}`)\r\n        } else {\r\n          alert('保存支出失败，请检查网络连接')\r\n        }\r\n      }\r\n    },\r\n    \r\n    // 确认删除支出\r\n    confirmDeleteExpense(expense) {\r\n      this.expenseToDelete = expense\r\n      this.showDeleteDialog = true\r\n    },\r\n    \r\n    // 删除支出\r\n    async deleteExpense() {\r\n      try {\r\n        console.log('删除支出:', this.expenseToDelete)\r\n        \r\n        const response = await axios.delete(`${this.apiBaseUrl}/expenses/${this.expenseToDelete.id}`)\r\n        console.log('支出删除成功:', response.data)\r\n        \r\n        // 关闭对话框并刷新数据\r\n        this.showDeleteDialog = false\r\n        this.expenseToDelete = null\r\n        this.fetchExpenses()\r\n        this.fetchExpenseComposition()\r\n        this.fetchIncomeComposition()\r\n        this.fetchTrends()\r\n        this.fetchMonthlySummary()\r\n      } catch (error) {\r\n        console.error('删除支出失败:', error)\r\n        if (error.response) {\r\n          console.error('错误状态码:', error.response.status)\r\n          console.error('错误响应:', error.response.data)\r\n          alert(`删除支出失败: ${error.response.data.message || '未知错误'}`)\r\n        } else {\r\n          alert('删除支出失败，请检查网络连接')\r\n        }\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('resize', this.handleResize)\r\n    this.trendChart?.dispose()\r\n    this.incomePieChart?.dispose()\r\n    this.expensePieChart?.dispose()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.financial-page {\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-title {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n}\r\n\r\n/* 财务概览卡片样式 */\r\n.financial-overview {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 20px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.overview-card {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  min-height: 120px;\r\n}\r\n\r\n.overview-card h3 {\r\n  margin: 0 0 10px 0;\r\n  color: #666;\r\n  font-size: 16px;\r\n}\r\n\r\n.amount {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.trend {\r\n  font-size: 14px;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  display: inline-block;\r\n}\r\n\r\n.trend.up {\r\n  background-color: #e8f5e9;\r\n  color: #2e7d32;\r\n}\r\n\r\n.trend.down {\r\n  background-color: #ffebee;\r\n  color: #c62828;\r\n}\r\n\r\n/* 图表区域样式 */\r\n.charts-container {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\r\n  gap: 20px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.chart-card {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  position: relative;\r\n}\r\n\r\n.chart-card h3 {\r\n  margin: 0 0 20px 0;\r\n  color: #333;\r\n  font-size: 18px;\r\n}\r\n\r\n.chart {\r\n  height: 300px;\r\n  width: 100%;\r\n}\r\n\r\n.chart-loading {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 数据表格样式 */\r\n.data-table-container {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  position: relative;\r\n}\r\n\r\n.data-table-container h3 {\r\n  margin: 0 0 20px 0;\r\n  color: #333;\r\n  font-size: 18px;\r\n}\r\n\r\n.table-controls {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.date-range {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.date-input {\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n}\r\n\r\n.filter-select {\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  min-width: 120px;\r\n}\r\n\r\n.data-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.data-table th,\r\n.data-table td {\r\n  padding: 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.data-table th {\r\n  background-color: #f5f5f5;\r\n  font-weight: 500;\r\n}\r\n\r\n.type-badge {\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n}\r\n\r\n.type-badge.income {\r\n  background-color: #e8f5e9;\r\n  color: #2e7d32;\r\n}\r\n\r\n.type-badge.expense {\r\n  background-color: #ffebee;\r\n  color: #c62828;\r\n}\r\n\r\n.income-amount {\r\n  color: #2e7d32;\r\n}\r\n\r\n.expense-amount {\r\n  color: #c62828;\r\n}\r\n\r\n.table-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px 0;\r\n  color: #666;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 30px;\r\n  height: 30px;\r\n  border: 3px solid #f3f3f3;\r\n  border-top: 3px solid #3498db;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.no-data {\r\n  text-align: center;\r\n  color: #666;\r\n  padding: 20px 0;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .charts-container {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .table-controls {\r\n    flex-direction: column;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .date-range {\r\n    flex-wrap: wrap;\r\n  }\r\n  \r\n  .data-table {\r\n    display: block;\r\n    overflow-x: auto;\r\n  }\r\n}\r\n\r\n/* 支出管理样式 */\r\n.expense-manage {\r\n  margin-top: 20px;\r\n}\r\n\r\n.expense-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.expense-header h3 {\r\n  margin: 0;\r\n  font-size: 18px;\r\n}\r\n\r\n.add-button {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n}\r\n\r\n.add-button:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\n.filter-section {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n  background: white;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.loading-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 40px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.expense-list {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.category-badge {\r\n  display: inline-block;\r\n  padding: 4px 8px;\r\n  background-color: #f5f5f5;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  color: #333;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.action-button {\r\n  border: none;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n}\r\n\r\n.action-button.edit {\r\n  background-color: #2196F3;\r\n  color: white;\r\n}\r\n\r\n.action-button.delete {\r\n  background-color: #f44336;\r\n  color: white;\r\n}\r\n\r\n/* 对话框样式 */\r\n.dialog-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.dialog-content {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  width: 400px;\r\n  max-width: 90%;\r\n}\r\n\r\n.dialog-content h3 {\r\n  margin-top: 0;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: 500;\r\n}\r\n\r\n.form-group input,\r\n.form-group select,\r\n.form-group textarea {\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n}\r\n\r\n.form-buttons {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.cancel-button {\r\n  background-color: #f5f5f5;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.save-button {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.delete-button {\r\n  background-color: #f44336;\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.delete-dialog {\r\n  width: 350px;\r\n}\r\n\r\n/* 功能切换标签样式 */\r\n.function-tabs {\r\n  display: flex;\r\n  margin-bottom: 20px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.tab-button {\r\n  flex: 1;\r\n  padding: 12px;\r\n  border: none;\r\n  background: white;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  color: #666;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.tab-button.active {\r\n  background-color: #1976D2;\r\n  color: white;\r\n  font-weight: 500;\r\n}\r\n\r\n.tab-button:hover:not(.active) {\r\n  background-color: #f5f5f5;\r\n}\r\n</style>\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}